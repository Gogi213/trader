# –ü–ª–∞–Ω –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Å–ø—Ä–∏–Ω—Ç–æ–≤

## üì¶ SPRINT 3: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ (–ö–†–ò–¢–ò–ß–ù–û)
**–í—Ä–µ–º—è:** 4-6 —á–∞—Å–æ–≤
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

### –ó–∞–¥–∞—á–∏:
1. **–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å TradingStrategyService.cs:**
   - –î–æ–±–∞–≤–∏—Ç—å PositionManager —á–µ—Ä–µ–∑ DI
   - –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—è –Ω–∞ OrderState
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Position –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–∑–∏—Ü–∏–∏

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤:**
   ```csharp
   // –ü—Å–µ–≤–¥–æ–∫–æ–¥ –ª–æ–≥–∏–∫–∏
   OnOrderBookUpdate(orderBook) {
       var bestBid = orderBook.Bids.First().Price;
       var bestAsk = orderBook.Asks.First().Price;

       // –ü—Ä–æ–≤–µ—Ä–∫–∞ threshold
       if (Math.Abs(bestBid - _orderState.BidPrice) / _orderState.BidPrice > _threshold) {
           await ModifyBidOrder(bestBid);
       }

       // –ï—Å–ª–∏ –µ—Å—Ç—å –ø–æ–∑–∏—Ü–∏—è - –æ–±–Ω–æ–≤–ª—è–µ–º ASK
       if (_positionManager.HasOpenPosition()) {
           var targetAsk = _positionManager.CalculateTargetPrice(...);
           if (ShouldUpdateAsk(targetAsk)) {
               await ModifyAskOrder(targetAsk);
           }
       }
   }
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å debounce –º–µ—Ö–∞–Ω–∏–∑–º:**
   - –ù–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ 200ms
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DateTime.UtcNow –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —á–∞—Å—Ç–æ—Ç—ã

4. **–õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤:**
   ```csharp
   OnOrderFilled(order) {
       if (order.Side == Buy) {
           _positionManager.OpenPosition(symbol, order.Price, order.Quantity, targetSpread);
           // –†–∞–∑–º–µ—Å—Ç–∏—Ç—å ASK –ø–æ —Ü–µ–ª–µ–≤–æ–π —Ü–µ–Ω–µ
       }
       else {
           _positionManager.ClosePosition();
           // –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π BID
       }
   }
   ```

### –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- `src/Trader.Core/TradingStrategyService.cs` - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞
- `src/Trader.ConsoleHost/Program.cs` - –¥–æ–±–∞–≤–∏—Ç—å PositionManager –≤ DI

### –ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
- ‚úÖ –û—Ä–¥–µ—Ä–∞ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è –≤–º–µ—Å—Ç–æ –æ—Ç–º–µ–Ω—ã
- ‚úÖ Threshold —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Position –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ PositionManager
- ‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

---

## üì¶ SPRINT 6: –£–ª—É—á—à–µ–Ω–∏–µ Circuit Breaker
**–í—Ä–µ–º—è:** 2-3 —á–∞—Å–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

### –ó–∞–¥–∞—á–∏:
1. **–î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π:**
   ```csharp
   private int _circuitBreakerTripCount = 0;
   private DateTime? _lastTripTime;
   ```

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å cooldown:**
   ```csharp
   if (_lastTripTime.HasValue &&
       (DateTime.UtcNow - _lastTripTime.Value).TotalSeconds < _cooldownSeconds) {
       // –í —Ä–µ–∂–∏–º–µ cooldown - –Ω–µ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å
       return;
   }
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏:**
   ```csharp
   private Queue<decimal> _lastSpreads = new Queue<decimal>(10);

   var avgChange = CalculateAverageSpreadChange(_lastSpreads);
   if (avgChange > 0.5m) { // 0.5% —Å—Ä–µ–¥–Ω—è—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
       TriggerCircuitBreaker();
   }
   ```

4. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—ã—Ö–æ–¥ –∏–∑ cooldown
   - –ú–µ—Ç—Ä–∏–∫–∏: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π, —Å—Ä–µ–¥–Ω—è—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å

### –ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
- ‚úÖ Circuit Breaker —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∞–Ω–æ–º–∞–ª–∏—è—Ö
- ‚úÖ Cooldown —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –õ–æ–≥–∏ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ

---

## üì¶ SPRINT 7: Zero-Copy –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
**–í—Ä–µ–º—è:** 3-4 —á–∞—Å–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô (–ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)

### –ó–∞–¥–∞—á–∏:
1. **–î–æ–±–∞–≤–∏—Ç—å JSON Source Generation:**
   ```csharp
   [JsonSerializable(typeof(MexcOrderBook))]
   [JsonSerializable(typeof(MexcOrder))]
   [JsonSerializable(typeof(MexcStreamOrderBook))]
   internal partial class TradingJsonContext : JsonSerializerContext
   {
   }
   ```

2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ WebSocket –∫–ª–∏–µ–Ω—Ç:**
   - –û–±–Ω–æ–≤–∏—Ç—å MexcSocketApiClient
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Source Generated –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏

3. **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å dotMemory
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å allocations –≤ hot paths
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Å—Ç–∞

4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Span<T> –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ:**
   - –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–æ–∫
   - –†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

### –ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
- ‚úÖ Allocations —Å–æ–∫—Ä–∞—â–µ–Ω—ã –Ω–∞ 30%+
- ‚úÖ –ù–µ—Ç boxing/unboxing –≤ hot paths
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è

---

## üß™ SPRINT 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
**–í—Ä–µ–º—è:** 4-6 —á–∞—Å–æ–≤
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô (–ø–µ—Ä–µ–¥ production)

### –ó–∞–¥–∞—á–∏:
1. **Unit —Ç–µ—Å—Ç—ã:**
   - `PositionManagerTests` - –≤—Å–µ –º–µ—Ç–æ–¥—ã
   - `OrderStateTests` - SetBid/Ask, Clear
   - `CircuitBreakerTests` - —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ, cooldown

2. **Integration —Ç–µ—Å—Ç—ã:**
   - –°–æ–∑–¥–∞—Ç—å Mock –¥–ª—è IMexcRestApiClient
   - –°–æ–∑–¥–∞—Ç—å Mock –¥–ª—è IMexcSocketApiClient
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å TradingStrategyService end-to-end

3. **Live —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ testnet MEXC (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –ï—Å–ª–∏ –Ω–µ—Ç testnet - –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ production —Å 5 USDT
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –≤ real-time
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:
     - –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
     - –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
     - –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ä–¥–µ—Ä–æ–≤
     - Circuit Breaker
     - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API

4. **Stress —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ–π –ø–∞—Ä–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ rate limits
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö

### –ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
- ‚úÖ 80%+ code coverage
- ‚úÖ –í—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏
- ‚úÖ 8+ —á–∞—Å–æ–≤ live trading –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–∏–±—ã–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ > —É–±—ã—Ç–æ—á–Ω—ã—Ö

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ Production

- [ ] SPRINT 3 –∑–∞–≤–µ—Ä—à–µ–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] SPRINT 6 –∑–∞–≤–µ—Ä—à–µ–Ω
- [ ] SPRINT 8 (—Ç–µ—Å—Ç—ã) –∑–∞–≤–µ—Ä—à–µ–Ω
- [ ] 24+ —á–∞—Å–∞ live trading –Ω–∞ –º–∞–ª—ã—Ö —Å—É–º–º–∞—Ö
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] API credentials –≤ secrets manager (–Ω–µ –≤ config!)
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] Code review –ø—Ä–æ–π–¥–µ–Ω

---

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ù–ï –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ production –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Sprint 3**
   –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –æ—Ç–º–µ–Ω—è–µ—Ç –æ—Ä–¥–µ—Ä–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞–∫–∞–Ω–∞ - —ç—Ç–æ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ rate limits.

2. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ testnet –∏–ª–∏ –º–∞–ª—ã—Ö —Å—É–º–º–∞—Ö**
   –†–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ 24+ —á–∞—Å–æ–≤ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å rate limits MEXC API**
   –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ª–∏–º–∏—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤.

4. **–ù–µ –∑–∞–±—ã—Ç—å –ø—Ä–æ Keep-Alive –¥–ª—è User Stream**
   WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∂–∏–≤—ã–º (ping –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫).

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

1. **SPRINT 3** (–∫—Ä–∏—Ç–∏—á–Ω–æ) - –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Ç–æ—Ä–≥–æ–≤—É—é –ª–æ–≥–∏–∫—É
2. **SPRINT 8** (—á–∞—Å—Ç—å 1) - unit —Ç–µ—Å—Ç—ã
3. **SPRINT 8** (—á–∞—Å—Ç—å 2) - integration —Ç–µ—Å—Ç—ã
4. **SPRINT 8** (—á–∞—Å—Ç—å 3) - live —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ 5 USDT
5. **SPRINT 6** - —É–ª—É—á—à–∏—Ç—å Circuit Breaker
6. **SPRINT 8** (—á–∞—Å—Ç—å 4) - extended live —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
7. **SPRINT 7** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ `logs/trader-*.log`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DEVELOPMENT_STATUS.md
- –ò–∑—É—á–∏—Ç—å –∫–æ–¥ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ `docs/Mexc.Net-main/Examples/`

